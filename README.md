# safepickle

A deliberately restricted pickling library for Scala. It has certain features, and deliberately lacks others, because it is tailormade for a particular scenario I needed. Most people will prefer general purpose libraries such as scala-pickling, upickle, or rapture, but this one is optimized for the following goals:

 1. Security. Serialized input can be generated by untrusted sources. Deserialization must not instantiate unexpected classes, take unpredictable amounts of space or time, or produce values not of the expected type.
 2. Certain changes to the definitions of serialized types are guaranteed to be backward and forward compatible, so different versions of the program can communicate, and serialized data can be used for long term storage.
 3. Backward incompatible changes can be managed explicitly, with version numbers and conversion code, allowing new code to read data written by old code, and old code to fail on encountering data written by new code.

The library is also small enough to understand and validate by hand, and to make sure its performance is driven by that of the backend used (e.g. Jackson for JSON).



Extra TODOs:
- Check the return value of Reader.read() in (most? all?) calls
- Performance tests
- Write readme
- Add test for manually written picklers being used as implicits by autogenerated ones, and vice versa
- Need to add pickler for BSON DateTime, but what type to use?
- Add picklers for ByteString and for joda-time types
- How to deal with explosion of module-per-dependency?
